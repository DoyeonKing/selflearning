# Word2Vec 模型文件准备指南

## 📋 步骤概览

1. 创建 `models` 文件夹
2. 下载中文 Word2Vec 模型文件
3. 重命名并放置到正确位置
4. 验证文件路径

---

## 🗂️ 第一步：创建 models 文件夹

在 `springboot` 项目根目录下创建 `models` 文件夹。

**Windows 操作：**
```bash
# 在项目根目录下执行
cd springboot
mkdir models
```

**或者直接在文件管理器中：**
- 打开 `springboot` 文件夹
- 右键 → 新建文件夹 → 命名为 `models`

---

## 📥 第二步：下载模型文件

### 选项1：中文维基百科 Word2Vec（推荐）

**下载地址：**
- GitHub: https://github.com/Embedding/Chinese-Word-Vectors
- 或者直接搜索 "Chinese Word Vectors GitHub"

**推荐下载：**
- **文件格式**：`.bin` (二进制格式)
- **维度**：200 维或 300 维都可以
- **推荐文件**：
  - `sgns.zhihu.word.bin` (知乎语料)
  - `sgns.weibo.word.bin` (微博语料)
  - `sgns.wiki.word.bin` (维基百科语料)

**下载步骤：**
1. 访问 GitHub 仓库
2. 找到 `Word_Character_Embeddings` 目录
3. 下载 `.bin` 格式的文件（文件较大，通常几百MB到几GB）

### 选项2：腾讯词向量（Tencent AI Lab）

**下载地址：**
- 官网：https://ai.tencent.com/ailab/nlp/zh/embedding.html
- 需要注册账号

**特点：**
- 词汇量大（800万+）
- 文件较大（约 5GB）
- 质量较高

### 选项3：使用预训练的中文医疗领域模型（如果有）

如果有医疗领域的 Word2Vec 模型，效果会更好。

---

## 📝 第三步：重命名和放置文件

1. **重命名文件**：
   - 将下载的 `.bin` 文件重命名为：`medical_word2vec.bin`
   - 例如：`sgns.zhihu.word.bin` → `medical_word2vec.bin`

2. **放置文件**：
   - 将重命名后的文件放到 `springboot/models/` 目录下
   - 最终路径应该是：`springboot/models/medical_word2vec.bin`

**文件结构示例：**
```
springboot/
├── pom.xml
├── src/
├── models/
│   └── medical_word2vec.bin  ← 模型文件放在这里
└── target/
```

---

## ✅ 第四步：验证配置

### 检查文件路径

确认文件存在：
```bash
# Windows PowerShell
Test-Path springboot\models\medical_word2vec.bin

# 或者直接查看
dir springboot\models\
```

### 检查配置文件

确认 `application.yml` 中的配置：
```yaml
ai:
  model:
    path: models/medical_word2vec.bin
```

---

## 🚀 第五步：测试模型加载

启动 Spring Boot 项目，查看控制台日志：

**成功加载的日志：**
```
⏳ 正在加载 AI 语义模型: models/medical_word2vec.bin (预计耗时 2-5 秒)...
✅ AI 模型加载成功！词汇量: XXXXXX
🚀 开始预计算医生特征向量...
✅ 已构建 XX 位医生的 AI 语义索引。
```

**如果文件不存在：**
```
⚠️ 未找到模型文件: models/medical_word2vec.bin。系统将自动降级为【纯关键词匹配模式】。
```

---

## ⚠️ 注意事项

1. **文件格式**：必须是 `.bin` 格式（Google Word2Vec 二进制格式）
   - ❌ 不支持 `.txt` 格式
   - ❌ 不支持 `.vec` 格式（除非转换）

2. **文件大小**：
   - 200维模型：约 200-500 MB
   - 300维模型：约 500MB - 1GB
   - 如果文件太小（< 50MB），可能不是完整的模型

3. **内存要求**：
   - 模型加载会占用内存
   - 建议服务器至少有 2GB 可用内存

4. **首次下载**：
   - 模型文件较大，下载可能需要一些时间
   - 建议使用稳定的网络连接

---

## 🔄 如果没有模型文件（降级模式）

**如果暂时没有模型文件，系统仍然可以运行：**
- ✅ 系统会自动降级为关键词匹配模式
- ✅ 所有功能仍然可用
- ✅ 只是没有 AI 语义理解能力
- ⚠️ 推荐效果会降低，但不会报错

**降级模式的日志：**
```
⚠️ 未找到模型文件: models/medical_word2vec.bin。系统将自动降级为【纯关键词匹配模式】。
⚠️ AI 模型未就绪，跳过医生向量预计算（将使用普通匹配）。
```

---

## 📚 推荐资源

1. **Chinese-Word-Vectors GitHub**
   - https://github.com/Embedding/Chinese-Word-Vectors
   - 包含多种预训练模型

2. **腾讯词向量**
   - https://ai.tencent.com/ailab/nlp/zh/embedding.html
   - 高质量大规模词向量

3. **FastText 中文模型**（需要转换）
   - https://fasttext.cc/docs/en/crawl-vectors.html

---

## 💡 快速测试方案

如果想快速测试，可以先不下载模型：
1. 系统会自动降级运行
2. 测试基本功能是否正常
3. 确认无误后再下载模型文件

---

## ❓ 常见问题

**Q: 模型文件太大，下载慢怎么办？**
A: 可以先使用降级模式测试，模型文件可以后续下载。

**Q: 找不到 .bin 格式的模型？**
A: 可以尝试下载 `.txt` 格式，但需要转换为 `.bin` 格式（需要额外工具）。

**Q: 模型加载失败？**
A: 检查文件格式是否正确，确保是 Google Word2Vec 二进制格式。

**Q: 内存不足？**
A: 可以尝试使用更小的模型（200维），或者增加服务器内存。


