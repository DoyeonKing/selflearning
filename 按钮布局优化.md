# 按钮布局优化

## 修改内容

### 待支付状态的按钮布局

**修改前**：
```
┌──────────────┐  ┌──────────────┐
│  返回主页    │  │  立即支付    │
└──────────────┘  └──────────────┘
┌──────────────────────────────────┐
│         取消预约                  │
└──────────────────────────────────┘
```

**修改后**：
```
┌──────────────────┐  ┌──────────────────┐
│   立即支付       │  │   取消预约       │
└──────────────────┘  └──────────────────┘
```

### 优势

1. **简洁明了**
   - 删除不必要的"返回主页"按钮
   - 只保留核心操作：支付和取消

2. **视觉平衡**
   - 两个按钮各占50%宽度
   - 左右对称，更加美观

3. **操作便捷**
   - 主要操作（支付）在左侧
   - 次要操作（取消）在右侧
   - 符合用户操作习惯

## 修改的代码

### 1. HTML 结构

**文件**：`uni_app/pages/appointment/detail.vue`
**位置**：第111-124行

```vue
<!-- 操作按钮 -->
<view class="action-section" v-if="!isCancelledStatus(appointment.status)">
    <!-- 待支付状态：显示支付和取消按钮 -->
    <view class="button-row" v-if="isPendingPaymentStatus(appointment.status)">
        <button class="pay-btn-half" @click="handlePayment">立即支付</button>
        <button class="cancel-btn-half" @click="handleCancel">取消预约</button>
    </view>
    <!-- 其他状态：显示返回主页和取消按钮 -->
    <view class="button-row" v-else>
        <button class="home-btn" @click="handleBackToHome">返回主页</button>
        <button class="cancel-btn" v-if="canCancelAppointment(appointment.status)" @click="handleCancel">取消预约</button>
        <button class="view-btn" v-if="isCompletedStatus(appointment.status) && !isConfirmedStatus(appointment.status)" @click="handleBackToHome">查看其他预约</button>
    </view>
</view>
```

### 2. CSS 样式

**文件**：`uni_app/pages/appointment/detail.vue`
**位置**：第991-1061行

```css
.action-section {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 30rpx;
    background: #ffffff;
    box-shadow: 0 -2rpx 12rpx rgba(0, 0, 0, 0.08);
}

.button-row {
    display: flex;
    gap: 20rpx;
    width: 100%;
}

/* 待支付状态的并排按钮 */
.pay-btn-half {
    flex: 1;
    height: 96rpx;
    background: linear-gradient(135deg, #52C41A 0%, #73D13D 100%);
    border: none;
    border-radius: 50rpx;
    color: #ffffff;
    font-size: 32rpx;
    font-weight: 600;
    box-shadow: 0 4rpx 12rpx rgba(82, 196, 26, 0.3);
}

.pay-btn-half:active {
    opacity: 0.8;
    transform: scale(0.98);
}

.cancel-btn-half {
    flex: 1;
    height: 96rpx;
    background: #FFF5F5;
    border: 2rpx solid #FED7D7;
    border-radius: 50rpx;
    color: #DC2626;
    font-size: 32rpx;
    font-weight: 600;
}

.cancel-btn-half:active {
    opacity: 0.8;
    transform: scale(0.98);
}
```

## 不同状态的按钮显示

### 1. 待支付状态（PENDING_PAYMENT）
```
┌──────────────────┐  ┌──────────────────┐
│   立即支付       │  │   取消预约       │
│   (绿色渐变)     │  │   (红色边框)     │
└──────────────────┘  └──────────────────┘
```

### 2. 已预约状态（scheduled）
```
┌──────────────────┐  ┌──────────────────┐
│   返回主页       │  │   取消预约       │
│   (青色渐变)     │  │   (红色边框)     │
└──────────────────┘  └──────────────────┘
```

### 3. 已完成状态（completed）
```
┌──────────────────┐  ┌──────────────────┐
│   返回主页       │  │   查看其他预约   │
│   (青色渐变)     │  │   (青色边框)     │
└──────────────────┘  └──────────────────┘
```

## 按钮样式说明

### 立即支付按钮（.pay-btn-half）
- **颜色**：绿色渐变（#52C41A → #73D13D）
- **效果**：阴影效果，突出主要操作
- **交互**：点击时缩小效果

### 取消预约按钮（.cancel-btn-half）
- **颜色**：浅红色背景 + 红色边框
- **效果**：警告色调，提醒用户谨慎操作
- **交互**：点击时缩小效果

## 验证步骤

### 1. 重新编译
```bash
cd d:\BJTU5\hospital_system\uni_app
npm run dev:mp-weixin
```

### 2. 清除缓存
在微信开发者工具中：
- 工具 → 清除缓存 → 清除所有缓存

### 3. 刷新页面
- 关闭当前预约详情页
- 重新进入预约详情页

### 4. 预期效果

待支付页面底部应该显示：

```
┌─────────────────────────────────────┐
│                                     │
│  ┌───────────┐    ┌───────────┐    │
│  │ 立即支付  │    │ 取消预约  │    │
│  └───────────┘    └───────────┘    │
│                                     │
└─────────────────────────────────────┘
```

- ✅ 只有两个按钮
- ✅ 左右各占50%宽度
- ✅ 中间有间隙（20rpx）
- ✅ 立即支付按钮是绿色渐变
- ✅ 取消预约按钮是红色边框

## 响应式设计

### 按钮宽度
- 使用 `flex: 1` 自动平分宽度
- 间隙固定为 20rpx
- 适配不同屏幕尺寸

### 按钮高度
- 固定高度 96rpx
- 适合手指点击

### 圆角
- 统一使用 50rpx 圆角
- 视觉更加柔和

## 用户体验优化

### 1. 视觉层次
- **主要操作**（立即支付）：绿色渐变 + 阴影
- **次要操作**（取消预约）：浅色背景 + 边框

### 2. 操作反馈
- 点击时有缩小动画（scale: 0.98）
- 透明度变化（opacity: 0.8）
- 提供即时的视觉反馈

### 3. 布局合理
- 删除不必要的"返回主页"按钮
- 用户可以通过左上角返回按钮返回
- 减少选择，提高决策效率

## 总结

### 修改内容
1. ✅ 删除"返回主页"按钮
2. ✅ 将"立即支付"和"取消预约"并排显示
3. ✅ 添加新的按钮样式（.pay-btn-half, .cancel-btn-half）
4. ✅ 删除旧的全宽支付按钮样式

### 优势
- ✅ 界面更简洁
- ✅ 操作更直观
- ✅ 视觉更平衡
- ✅ 符合用户习惯

### 影响范围
- 只影响待支付状态的按钮布局
- 其他状态保持原有布局
- 不影响功能逻辑

现在按钮布局已经优化完成！🎉
